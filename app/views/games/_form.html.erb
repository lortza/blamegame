<%= form_with(model: game, local: true) do |form| %>
  <%= render 'shared/errors', object: game %>
  <div class="field">
    <%= form.label 'Players Ready?' %>
    <%= form.check_box :players_ready %>
  </div>
  <table class="table table-players">
    <thead>
      <tr>
        <th>Player Name</th>
        <th>Delete Player?</th>
      </tr>
    </thead>
    <tbody>
      <%= form.fields_for :players do |f_player| %>
      <tr>
        <td><%= f_player.text_field :name, class: 'form-control' %></td>
        <td><%= f_player.check_box :_destroy if f_player.object.persisted? %></td>
      </tr>
      <% end %>
    </tbody>
  </table>

  <div class="mt-5 mb-5">
    <%= form.submit class: button_block %>
  </div>
<% end %>

<% if game.persisted? %>
  <hr>
  <h4>Danger Zone</h4>
  <p>This is the nuclear option. It will delete the whole game, all players, and any rounds.</p>
  <%= link_to 'Delete Game and All Players', game, method: :delete, data: { confirm: 'Are you sure?' }, class: "mb-5 #{button_class('danger')}" %>
<% end %>
